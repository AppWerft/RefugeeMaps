var Map=require("ti.map");module.exports=function(){var a=Ti.UI.createWindow({title:"RefugeeMaps for Hamburg",exitOnClose:!0,backgroundColor:"white",theme:"Theme.NoActionBar"});a.addEventListener("open",function(){a.activity.actionBar.hide(),a.map=Map.createView({region:{latitude:53.553,longitude:10,latitudeDelta:.1,longitudeDelta:.1},enableZoomControls:!1,compassEnabled:!1}),a.list=Ti.UI.createView({top:50,bottom:0}),a.list.add(Ti.UI.createTableView({top:50})),a.add(Ti.UI.createScrollableView({views:[a.map,a.list]}));require("adapters/refmaps")(function(e){a.map.addAnnotations(e.map(function(a){return Map.createAnnotation({latitude:a.position.lat,longitude:a.position.lng,title:a.name,subtitle:a.translations[0].text,image:"/images/"+a.category+".png"})}));var t=e.map(function(a){var e=Ti.UI.createTableViewRow({height:Ti.UI.SIZE});return e.add(Ti.UI.createImageView({left:5,top:5,width:30,height:40,image:"/assets/"+a.category+".png"})),e.add(Ti.UI.createView({left:60,top:5,width:Ti.UI.FILL,height:Ti.UI.SIZE,layout:"vertical"})),e.children[1].add(Ti.UI.createLabel({top:0,textAlign:"left",width:Ti.UI.FILL,text:a.name,color:"#777",font:{fontSize:22,fontWeight:"bold"}})),e.children[1].add(Ti.UI.createLabel({top:0,width:Ti.UI.FILL,textAlign:"left",text:a.address,color:"#333"})),e});a.list.children[0].setData(t)});a.add(Ti.UI.createView({top:0,height:50,backgroundColor:"#6000"})),a.children[1].add(Ti.UI.createButton({backgroundImage:"/assets/map.png",width:30,height:30,right:10})),a.children[1].add(Ti.UI.createButton({backgroundImage:"/assets/filter.png",width:30,height:30,right:70})),a.children[1].children[0].addEventListener("click",function(){a.children[0].scrollToView(0==a.children[0].currentPage?1:0)}),a.children[0].addEventListener("scrollend",function(e){a.children[1].children[0].backgroundImage=0==e.source.currentPage?"/assets/map.png":"/assets/list.png"})}),a.addEventListener("android:back",function(a){a.cancelBubble=!0;var e=Ti.Android.createIntent({action:Ti.Android.ACTION_MAIN,flags:Ti.Android.FLAG_ACTIVITY_NEW_TASK});return e.addCategory(Ti.Android.CATEGORY_HOME),Ti.Android.currentActivity.startActivity(e),!1}),Ti.Gesture.addEventListener("orientationchange",function(){a.children[1].setTop(Ti.Platform.displayCaps.platformHeight>Ti.Platform.displayCaps.platformWidth?0:-50)}),a.open()};